<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>KShowmail: src/mail.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>src/mail.h</h1><a href="mail_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">   This library is free software; you can redistribute it and/or</span>
<a name="l00003"></a>00003 <span class="comment">   modify it under the terms of the GNU Library General Public</span>
<a name="l00004"></a>00004 <span class="comment">   License version 2 as published by the Free Software Foundation.</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">   This library is distributed in the hope that it will be useful,</span>
<a name="l00007"></a>00007 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00008"></a>00008 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00009"></a>00009 <span class="comment">   Library General Public License for more details.</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">   You should have received a copy of the GNU Library General Public License</span>
<a name="l00012"></a>00012 <span class="comment">   along with this library; see the file COPYING.LIB.  If not, write to</span>
<a name="l00013"></a>00013 <span class="comment">   the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,</span>
<a name="l00014"></a>00014 <span class="comment">   Boston, MA 02110-1301, USA.</span>
<a name="l00015"></a>00015 <span class="comment">*/</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#ifndef MAIL_H</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#define MAIL_H</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="keyword">class </span><a class="code" href="classMail.html">Mail</a>;
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="comment">//C++ headers</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="comment">//Qt header</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;QObject&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;QStringList&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;QRegExp&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;QTextCodec&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;QDomElement&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">//KDE headers</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;kmime/kmime_codecs.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;kmime/kmime_headers.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;KDateTime&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="comment">//KShowmail headers</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include "<a class="code" href="maillist_8h.html">maillist.h</a>"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "<a class="code" href="account_8h.html">account.h</a>"</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="keyword">using namespace </span>std;
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">//separator to join the header to a single string to save it on disk</span>
<a name="l00044"></a><a class="code" href="mail_8h.html#913b64de8582fe2318e8a9ef245c4d76">00044</a> <span class="preprocessor">#define HEADER_SEPARATOR "ยง$%&amp;"</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00049"></a><a class="code" href="classMail.html">00049</a> <span class="keyword">class </span><a class="code" href="classMail.html">Mail</a> : <span class="keyword">public</span> QObject
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051 
<a name="l00052"></a>00052         Q_OBJECT
<a name="l00053"></a>00053         
<a name="l00054"></a>00054         <span class="keyword">public</span>:
<a name="l00055"></a>00055     
<a name="l00056"></a>00056     
<a name="l00064"></a>00064                 <a class="code" href="classMail.html#d19d6f597c659bde174270dfe7c4aa12">Mail</a>( <span class="keywordtype">long</span> <a class="code" href="classMail.html#72531c2f3f016021c4dc362f33703c2d">number</a>, <span class="keyword">const</span> QString&amp; <a class="code" href="classMail.html#573c5b5763cab58782e96ffcc5815a3f">unid</a>, <span class="keywordtype">bool</span> <a class="code" href="classMail.html#140fb3f90375e82c44c5bdde4cda767d">isNew</a>, QObject* parent );
<a name="l00065"></a>00065                 
<a name="l00069"></a>00069                 <a class="code" href="classMail.html#7f59d642ff71033500e1fac06ce9b3b1">~Mail</a>();
<a name="l00070"></a>00070                 
<a name="l00075"></a>00075                 <span class="keywordtype">void</span> <a class="code" href="classMail.html#15459e7c2cf6dee4c68b2ea705848811">setSize</a>( <span class="keywordtype">long</span> <a class="code" href="classMail.html#8f6452c577ea387c3902eb74971833ad">size</a> );
<a name="l00076"></a>00076                 
<a name="l00081"></a>00081                 <span class="keywordtype">void</span> <a class="code" href="classMail.html#cdb6b291f5eb72595b350dc5ed51312e">setNumber</a>( <span class="keywordtype">int</span> number );
<a name="l00082"></a>00082                 
<a name="l00086"></a>00086                 <span class="keywordtype">void</span> <a class="code" href="classMail.html#6f8bc30354479bab239c1d0675552b8a">print</a>() <span class="keyword">const</span>;
<a name="l00087"></a>00087                 
<a name="l00092"></a>00092                 QString <a class="code" href="classMail.html#652fb5296b0f7466961dc1824486531f">getSubject</a>() <span class="keyword">const</span>;
<a name="l00093"></a>00093                 
<a name="l00098"></a>00098                 QString <a class="code" href="classMail.html#a09383352447fd16afd8c53431a94f52">getUNID</a>() <span class="keyword">const</span>;
<a name="l00099"></a>00099                 
<a name="l00104"></a>00104                 <span class="keywordtype">long</span> <a class="code" href="classMail.html#1fef3d13c6e913d948ae93ba66ec33db">getSize</a>() <span class="keyword">const</span>;
<a name="l00105"></a>00105                 
<a name="l00110"></a>00110                 <span class="keywordtype">int</span> <a class="code" href="classMail.html#80f2a8dee3d89d5d5c599c0fd4775f2c">getNumber</a>() <span class="keyword">const</span>;
<a name="l00111"></a>00111 
<a name="l00116"></a>00116     <span class="keywordtype">void</span> <a class="code" href="classMail.html#83ce7e5632a32f811df45c6783fdcae7">setNew</a>( <span class="keywordtype">bool</span> isnew );
<a name="l00117"></a>00117 
<a name="l00123"></a>00123     <span class="keywordtype">bool</span> <a class="code" href="classMail.html#140fb3f90375e82c44c5bdde4cda767d">isNew</a>() <span class="keyword">const</span>;
<a name="l00124"></a>00124 
<a name="l00130"></a>00130     <span class="keywordtype">void</span> <a class="code" href="classMail.html#e730487fca14135cd7abca64bbafe58a">setHeader</a>( <span class="keyword">const</span> QStringList&amp; <a class="code" href="classMail.html#6b35beb2f9d7b33bfe1d2270b626b9f4">header</a> );
<a name="l00131"></a>00131     
<a name="l00136"></a>00136     QStringList <a class="code" href="classMail.html#768d6a56b5d45cab4bf09e409fe48416">getHeader</a>() <span class="keyword">const</span>;
<a name="l00137"></a>00137 
<a name="l00142"></a>00142     <span class="keywordtype">void</span> <a class="code" href="classMail.html#7931f7d3d934a74602d70cba56793620">setSubject</a>( <span class="keyword">const</span> QString&amp; <a class="code" href="classMail.html#d5c0770ac5b1124a6fff9bdb933a7cbe">subject</a> );
<a name="l00143"></a>00143 
<a name="l00148"></a>00148     <span class="keywordtype">void</span> <a class="code" href="classMail.html#0129a03cab2b3576423cebee66d4ca54">setFrom</a>( <span class="keyword">const</span> QString&amp; <a class="code" href="classMail.html#50d03592bc5577d13bb6ad55cd134e3a">from</a> );
<a name="l00149"></a>00149 
<a name="l00154"></a>00154     <span class="keywordtype">void</span> <a class="code" href="classMail.html#a76e6550efa3d8224ae7f65e8a452874">setTo</a>( <span class="keyword">const</span> QString&amp; <a class="code" href="classMail.html#2842351c66f7dfb81e39bbc91b88c594">to</a> );
<a name="l00155"></a>00155 
<a name="l00160"></a>00160     <span class="keywordtype">void</span> <a class="code" href="classMail.html#e2f4945ab4afd979e4af6126f95b6e82">setDate</a>( <span class="keyword">const</span> QString&amp; date );
<a name="l00161"></a>00161 
<a name="l00165"></a>00165     KDateTime <a class="code" href="classMail.html#8c28515c0f9cdf991dfca2b1ddfd56cb">getDateTime</a>() <span class="keyword">const</span>;
<a name="l00166"></a>00166 
<a name="l00171"></a>00171     <span class="keywordtype">void</span> <a class="code" href="classMail.html#fce526b699f00c4589a91511e707305b">setContent</a>( <span class="keyword">const</span> QString&amp; content );
<a name="l00172"></a>00172 
<a name="l00177"></a>00177     QString <a class="code" href="classMail.html#3c63ace91ac35c9f8783e845a9320f54">getContent</a>() <span class="keyword">const</span>;
<a name="l00178"></a>00178 
<a name="l00183"></a>00183     <a class="code" href="classAccount.html">Account</a>* <a class="code" href="classMail.html#301d8a5b01429b32c603dfa24cdb1429">getAccount</a>() <span class="keyword">const</span>;
<a name="l00184"></a>00184 
<a name="l00189"></a>00189     QString <a class="code" href="classMail.html#f68babd70d84fc44312d09f49ec0eae9">getFrom</a>() <span class="keyword">const</span>;
<a name="l00190"></a>00190 
<a name="l00195"></a>00195     QString <a class="code" href="classMail.html#f5c6ff23c22eebaddd2437f548799da7">getTo</a>() <span class="keyword">const</span>;
<a name="l00196"></a>00196 
<a name="l00200"></a>00200     QString <a class="code" href="classMail.html#229e9001bbec9f4c9bf77d9f77920783">getSizeSuffix</a>() <span class="keyword">const</span>;
<a name="l00201"></a>00201 
<a name="l00215"></a>00215     <a class="code" href="namespaceTypes.html#ce032cf029e8037fd21721b33e3a6adf">FilterAction_Type</a> <a class="code" href="classMail.html#75a86126042d3cb4859dc90d92d8286d">applyHeaderFilter</a>( <a class="code" href="classHeaderFilter.html" title="This is the mail header filter. Call check() with some header datas of the mail to...">HeaderFilter</a>* filter, QString account, QString&amp; mailbox, <a class="code" href="classFilterLog.html">FilterLog</a>* log = NULL );
<a name="l00216"></a>00216 
<a name="l00223"></a>00223     <span class="keywordtype">void</span> <a class="code" href="classMail.html#83b979d63e95e35b4c8ee20ac533ac3d">save</a>( QDomDocument&amp; doc, QDomElement&amp; parent );
<a name="l00224"></a>00224 
<a name="l00229"></a>00229     <span class="keywordtype">bool</span> <a class="code" href="classMail.html#fd413f7ab35370632cf2efdff34ec6e1">isMarkedByFilter</a>() <span class="keyword">const</span>;
<a name="l00230"></a>00230 
<a name="l00242"></a>00242     QStringList <a class="code" href="classMail.html#2d002302c55289db64089361d9804cf1">decodeMailBody</a>( <span class="keyword">const</span> QStringList&amp; body, <span class="keywordtype">bool</span> preferHTML ) <span class="keyword">const</span>;
<a name="l00243"></a>00243 
<a name="l00249"></a>00249     QString <a class="code" href="classMail.html#260d3e1a6a0f7d983f01ad8326cc758b">getBoundary</a>() <span class="keyword">const</span>;
<a name="l00250"></a>00250 
<a name="l00256"></a>00256     QString <a class="code" href="classMail.html#4bde1075aad259f138efc31f456e71d0">getCharsetFromHeader</a>() <span class="keyword">const</span>;
<a name="l00257"></a>00257 
<a name="l00263"></a>00263     QString <a class="code" href="classMail.html#3e646bb80f0f17383192e6271be2f806">getTransferEncodingFromHeader</a>() <span class="keyword">const</span>;
<a name="l00264"></a>00264 
<a name="l00271"></a>00271     <span class="keywordtype">void</span> <a class="code" href="classMail.html#f12fe5432e54e0ea962bb9d274827c29">writeToMoveLog</a>( <a class="code" href="classFilterLog.html">FilterLog</a>* log, QString account, QString mailbox );
<a name="l00272"></a>00272 
<a name="l00278"></a>00278     <span class="keywordtype">void</span> <a class="code" href="classMail.html#97a01789aa0735cf4ff560e90c242a88">writeToDeleteLog</a>( <a class="code" href="classFilterLog.html">FilterLog</a>* log, QString account );
<a name="l00279"></a>00279 
<a name="l00283"></a>00283     <span class="keywordtype">void</span> <a class="code" href="classMail.html#1242a9c09bce753c79dc755ce7c66333">setMarkAtNextViewRefresh</a>();
<a name="l00284"></a>00284 
<a name="l00292"></a>00292     <span class="keywordtype">int</span> <a class="code" href="classMail.html#56ee63de9801c2c9f86959b8eeb065bb">compare</a>( <a class="code" href="classMail.html">Mail</a>* other, <a class="code" href="namespaceTypes.html#a41eee3cc91221a60a8252f4a31da4c1">MailSort_Type</a> property );
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 
<a name="l00295"></a>00295         <span class="keyword">private</span>:
<a name="l00296"></a>00296                 
<a name="l00300"></a><a class="code" href="classMail.html#573c5b5763cab58782e96ffcc5815a3f">00300</a>                 QString unid;
<a name="l00301"></a>00301                 
<a name="l00305"></a><a class="code" href="classMail.html#d5c0770ac5b1124a6fff9bdb933a7cbe">00305</a>                 QString subject;
<a name="l00306"></a>00306                 
<a name="l00310"></a><a class="code" href="classMail.html#6b35beb2f9d7b33bfe1d2270b626b9f4">00310</a>                 QStringList header;
<a name="l00311"></a>00311                 
<a name="l00315"></a><a class="code" href="classMail.html#8f6452c577ea387c3902eb74971833ad">00315</a>                 <span class="keywordtype">long</span> size;
<a name="l00316"></a>00316                 
<a name="l00320"></a><a class="code" href="classMail.html#72531c2f3f016021c4dc362f33703c2d">00320</a>                 <span class="keywordtype">int</span> number;
<a name="l00321"></a>00321 
<a name="l00325"></a><a class="code" href="classMail.html#a055c9a6e8f8a8f1432d121bcd50871b">00325</a>     <span class="keywordtype">bool</span> <a class="code" href="classMail.html#a055c9a6e8f8a8f1432d121bcd50871b">_new</a>;
<a name="l00326"></a>00326 
<a name="l00330"></a><a class="code" href="classMail.html#50d03592bc5577d13bb6ad55cd134e3a">00330</a>     QString from;
<a name="l00331"></a>00331 
<a name="l00335"></a><a class="code" href="classMail.html#2842351c66f7dfb81e39bbc91b88c594">00335</a>     QString to;
<a name="l00336"></a>00336 
<a name="l00340"></a><a class="code" href="classMail.html#134219093d96a9d1e4e4d06e3a9b25f0">00340</a>     KDateTime <a class="code" href="classMail.html#134219093d96a9d1e4e4d06e3a9b25f0">sendDate</a>;
<a name="l00341"></a>00341     
<a name="l00345"></a><a class="code" href="classMail.html#424e0d906f50ddbcdd68213d3b8d3b0c">00345</a>     QString <a class="code" href="classMail.html#424e0d906f50ddbcdd68213d3b8d3b0c">contentType</a>;
<a name="l00346"></a>00346 
<a name="l00351"></a><a class="code" href="classMail.html#3d88ed5f20b6fd757e2c6dfa266fac02">00351</a>     <span class="keywordtype">bool</span> <a class="code" href="classMail.html#3d88ed5f20b6fd757e2c6dfa266fac02">markedByFilter</a>;
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 
<a name="l00354"></a>00354         <span class="keyword">protected</span>:
<a name="l00355"></a>00355                 
<a name="l00359"></a>00359                 <span class="keywordtype">void</span> <a class="code" href="classMail.html#9bb87f1b7fab8c9ff396d48c530dd40a">init</a>();
<a name="l00360"></a>00360 
<a name="l00372"></a>00372     QString <a class="code" href="classMail.html#0b74a5dae412eb2744216d2529a6044f">scanHeader</a>( <span class="keyword">const</span> QString&amp; item ) <span class="keyword">const</span>;
<a name="l00373"></a>00373 
<a name="l00386"></a>00386     QString <a class="code" href="classMail.html#c3089fc2f8355d94f3feb36394ec614e">scanBodyPart</a>( <span class="keyword">const</span> QStringList&amp; part, <span class="keyword">const</span> QString&amp; item ) <span class="keyword">const</span>;
<a name="l00387"></a>00387 
<a name="l00391"></a>00391     QString <a class="code" href="classMail.html#d502ece96360c816794cb608d6d2ab50">decodeRfc2047</a>( <span class="keyword">const</span> QString&amp; text ) <span class="keyword">const</span>;
<a name="l00392"></a>00392 
<a name="l00399"></a>00399     QString <a class="code" href="classMail.html#744bd61d3237be271e28437bc4aa3243">getCharset</a>( <span class="keyword">const</span> QStringList&amp; text ) <span class="keyword">const</span>;    
<a name="l00400"></a>00400                 
<a name="l00407"></a>00407     QString <a class="code" href="classMail.html#78d1a72fc549c3d4049e6f962720bec7">getTransferEncoding</a>( <span class="keyword">const</span> QStringList&amp; text ) <span class="keyword">const</span>;
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 };
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="preprocessor">#endif // MAIL_H</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Mar 20 13:50:29 2010 for KShowmail by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
